{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst axiosMetod = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '44049437-ef12fae0346c4a67068c57c01',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    \n  }\n});\n\n\nexport async function searchFoto(word, page = 1) {\n  const userFoto = await axiosMetod.get('', {\n    params: {\n      q: word,\n      page: page,\n      per_page: 15,\n    }\n  });\n\n\n  return userFoto.data;\n}\n\n","function imageTemplate(image) {\n    return `<li class=\"gallery-item\">\n    <a href=\"${image.largeImageURL}\">\n    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n    <div class=\"wrapper\">\n    <div><h3>Likes</h3><p>${image.likes}</p></div>\n    <div><h3>Views</h3><p>${image.views}</p></div>\n    <div><h3>Comments</h3><p>${image.comments}</p></div>\n    <div><h3>Downloads</h3><p>${image.downloads}</p></div>\n    </div>\n    </a>\n  </li>`;\n}\n\nexport function imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}\n\n\n","import { searchFoto } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.form');\nconst imagesList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-btn-load');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    animationSpeed: 200,\n    animationSlide: true,\n    disableScroll: false,\n    history: false,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet perPage = 15;\nlet currentWord = '';\nlet totalImages = 0;\n\nbtnLoadMore.style.display = 'none';\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const word = e.target.elements.word.value.trim();\n    currentWord = word;\n    currentPage = 1;\n\n    imagesList.innerHTML = ''; // Очистити попередні зображення\n\n    if (!word) {\n        imagesList.innerHTML = ''; // Очистити попередні зображення при невалідному запиті\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    loader.classList.remove('hidden');\n    loader.style.display = 'block';\n    btnLoadMore.style.display = 'none';\n\n    try {\n        const data = await searchFoto(word, currentPage);\n        if (data.hits.length === 0) {\n            imagesList.innerHTML = ''; // Очистити попередні зображення, якщо немає збігів\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            totalImages = data.totalHits;\n            const markup = imagesTemplate(data.hits);\n            imagesList.innerHTML = markup;\n            lightbox.refresh();\n\n            if (totalImages >= currentPage * perPage) {\n                btnLoadMore.style.display = 'block';\n            }\n        }\n\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    } catch (error) {\n        console.error('Error searching images:', error.message);\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    }\n});\n\nbtnLoadMore.addEventListener('click', async e => {\n    currentPage += 1;\n\n    loader.classList.remove('hidden');\n\n    if (totalImages <= currentPage * perPage) {\n        btnLoadMore.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    }\n\n    try {\n        const data = await searchFoto(currentWord, currentPage);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            const markup = imagesTemplate(data.hits);\n            imagesList.insertAdjacentHTML('beforeend', markup);\n            lightbox.refresh();\n\n            const galleryItem = document.querySelector('.gallery-item');\n            const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n            window.scrollBy({\n                top: galleryItemHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    } catch (error) {\n        console.error('Error loading more images:', error.message);\n        loader.classList.add('hidden');\n        loader.style.display = 'none';\n    }\n});\n"],"names":["axiosMetod","axios","searchFoto","word","page","imageTemplate","image","imagesTemplate","arr","form","imagesList","loader","btnLoadMore","lightbox","SimpleLightbox","currentPage","perPage","currentWord","totalImages","e","iziToast","data","markup","error","galleryItemHeight"],"mappings":"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"}